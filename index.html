<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PubMed Fetcher</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

</head>
<body>
    <div class="container">
        <h1 class="text-center my-4">PubMed Fetcher</h1>
        
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h2>API Configuration</h2>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="apiKey" class="form-label">NCBI PubMed API Key</label>
                    <input type="password" class="form-control" id="apiKey" placeholder="Enter your API key">
                    <div class="form-text">
                        The API key is required for accessing PubMed programmatically. Without it, you'll face request limits and delays in retrieving large datasets. 
                        <br>
                        You can create a free API key at: 
                        <a href="https://www.ncbi.nlm.nih.gov/account/settings/" target="_blank">NCBI Account Settings</a>
                        <br><strong>Important:</strong> Keep your API key private.
                    </div>
                </div>
                
                
                <div class="mb-3">
                    <label for="parallelRequests" class="form-label">Number of Parallel Requests</label>
                    <input type="number" class="form-control" id="parallelRequests" min="1" max="10" value="5">
                    <div class="form-text">Recommended: 3â€“10. Higher numbers may trigger rate limits.</div>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h2>Search Parameters</h2>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="searchQuery" class="form-label">PubMed Search Query</label>
                    <input type="text" class="form-control" id="searchQuery" placeholder="Enter your search terms">
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="startYear" class="form-label">Start Year (Default:1809)</label>
                        <input type="number" class="form-control" id="startYear" min="1809">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="endYear" class="form-label">End Year (Default: Current Year)</label>
                        <input type="number" class="form-control" id="endYear">
                    </div>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h2>Output Options</h2>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="outputBaseName" class="form-label">Output File Base Name</label>
                    <input type="text" class="form-control" id="outputBaseName" value="pubmed_results">
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" id="exportCSV" checked>
                    <label class="form-check-label" for="exportCSV">Export to CSV</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" id="exportJSON" checked>
                    <label class="form-check-label" for="exportJSON">Export to JSON</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="exportBib" checked>
                    <label class="form-check-label" for="exportBib">Export to BibTeX</label>
                </div>
            </div>
        </div>

        <div class="d-grid gap-2 mb-4">
            <button id="fetchButton" class="btn btn-primary btn-lg">
                Fetch PubMed Articles
                <span id="spinner" class="spinner" style="display: none;"></span>
            </button>            
        </div>

        <div id="progressSection" class="card mb-4" style="display: none;">
            <div class="card-header bg-info text-white">
                <h2>Progress</h2>
            </div>
            <div class="card-body">
                <div id="progressMessages" class="mb-3"></div>
                <div class="progress mb-3">
                    <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%"></div>
                </div>
                <div id="downloadLinks" class="mt-3"></div>
            </div>
        </div>

        <div id="errorSection" class="alert alert-danger" style="display: none;"></div>
    </div>

    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>